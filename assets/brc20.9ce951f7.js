import{s as k,_ as L,r as d,o as r,c as m,b as f,w as b,h as n,t as l,l as v,m as _,F as C,d as S,e as y,k as M,v as z,y as H,p as D,q as x,j as $}from"./index.68238d1b.js";function I(){return k({method:"get",url:"/v1api/v4/brc_tokens/banners"})}function R(){return k({method:"get",url:"/v1api/v4/brc_tokens/info"})}function T(t){return k({method:"get",url:"/v1api/v4/brc_tokens/hot",params:t})}function U(t){return k({method:"get",url:"/v1api/v4/brc_tokens/minting",params:t})}const V={name:"TokenList",props:{tableList:Array,loading:{type:Boolean,default:!1},finished:{type:Boolean,default:!1},error:{type:Boolean,default:!1}},emits:["sortChange"],data(){return{activeSort:0,sortBy:""}},computed:{isLoading(){return this.loading},errors(){return this.error}},methods:{tableRowClick(t){this.$f.openMarket(t.token,t.symbol,t.chain)},switchSort(t,e){if(t&&e!==void 0){this.sortBy=t,this.activeSort=e,this.emitRemote();return}if(this.sortBy!==t){this.sortBy=t,this.activeSort=1,this.emitRemote();return}this.activeSort++,this.activeSort>1&&(this.activeSort=-1),this.emitRemote()},emitRemote(){console.log("this.activeSort",this.activeSort);let t={"-1":"desc",0:"",1:"asc"};this.$emit("sortChange",{sort:this.sortBy,sort_dir:t==null?void 0:t[this.activeSort]})}}},F=t=>(D("data-v-fa1f579e"),t=t(),x(),t),A={class:"table"},G={class:"table-list"},O={class:"table-item table-header"},j={class:"table-item_d"},q={class:"icon-sort-container"},E={class:"icon-sort-container"},J=F(()=>n("span",null,"24H%",-1)),K={class:"icon-sort-container"},P=["onClick"],Q={class:"token-info table-item_d"},W={class:"icon-token-container"},X={class:"token-symbol"},Y={class:"table-item_d"},Z={class:"table-item_d"},w={class:"table-item_d"};function tt(t,e,a,u,o,s){const c=d("van-image"),h=d("van-button"),g=d("van-empty"),p=d("van-list");return r(),m("div",A,[f(p,{loading:s.isLoading,"onUpdate:loading":e[9]||(e[9]=i=>s.isLoading=i),finished:a.finished,error:s.errors,"onUpdate:error":e[10]||(e[10]=i=>s.errors=i),"error-text":t.$t("errorText"),onLoad:e[11]||(e[11]=i=>t.$emit("onload")),"loading-text":t.$t("loading"),"finished-text":t.$t("noMore"),"immediate-check":!1},{default:b(()=>[n("ul",G,[n("li",O,[n("div",j,[n("span",null,l(t.$t("token"))+"($)",1)]),n("div",{class:"table-item_d",onClick:e[2]||(e[2]=i=>s.switchSort("tx_volume_u_24h"))},[n("span",null,l(t.$t("24Hvolume"))+"($)",1),n("div",q,[n("i",{class:v(["iconfont icon-sort-up",{active:o.activeSort===1&&o.sortBy==="tx_volume_u_24h"}]),onClick:e[0]||(e[0]=_(i=>s.switchSort("tx_volume_u_24h",1),["stop"]))},null,2),n("i",{class:v(["iconfont icon-sort-down",{active:o.activeSort===-1&&o.sortBy==="tx_volume_u_24h"}]),onClick:e[1]||(e[1]=_(i=>s.switchSort("tx_volume_u_24h",-1),["stop"]))},null,2)])]),n("div",{class:"table-item_d",onClick:e[5]||(e[5]=i=>s.switchSort("current_price_usd"))},[n("span",null,l(t.$t("price"))+"($)",1),n("div",E,[n("i",{class:v(["iconfont icon-sort-up",{active:o.activeSort===1&&o.sortBy==="current_price_usd"}]),onClick:e[3]||(e[3]=_(i=>s.switchSort("current_price_usd",1),["stop"]))},null,2),n("i",{class:v(["iconfont icon-sort-down",{active:o.activeSort===-1&&o.sortBy==="current_price_usd"}]),onClick:e[4]||(e[4]=_(i=>s.switchSort("current_price_usd",-1),["stop"]))},null,2)])]),n("div",{class:"table-item_d",onClick:e[8]||(e[8]=i=>s.switchSort("price_change"))},[J,n("div",K,[n("i",{class:v(["iconfont icon-sort-up",{active:o.activeSort===1&&o.sortBy==="price_change"}]),onClick:e[6]||(e[6]=_(i=>s.switchSort("price_change",1),["stop"]))},null,2),n("i",{class:v(["iconfont icon-sort-down",{active:o.activeSort===-1&&o.sortBy==="price_change"}]),onClick:e[7]||(e[7]=_(i=>s.switchSort("price_change",-1),["stop"]))},null,2)])])]),(r(!0),m(C,null,S(a.tableList,(i,B)=>(r(),m("li",{class:"table-item",key:B,onClick:_(N=>s.tableRowClick(i),["stop"])},[n("div",Q,[n("div",W,[f(c,{round:"",width:"30px",height:"30px","icon-size":"30px","lazy-load":"","show-loading":"",src:t.$f.formatIcon(i),"error-icon":"/icon-default.png"},null,8,["src"])]),n("span",X,l(i.symbol||""),1)]),n("div",Y,[n("span",null,l(t.$f.formatNumber2(i.tx_volume_u_24h||0,1,4,10**4)),1)]),n("div",Z,[n("span",null,l(t.$f.formatNumber2(i.current_price_usd||0,3,4,10**4)),1)]),n("div",w,[i.price_change&&i.price_change>=0?(r(),y(h,{key:0,class:"button-priceChange",color:t.$store.getters.upColor[3],size:"mini"},{default:b(()=>[M(" +"+l(t.$f.formatNumber2(i.price_change||0,1))+"% ",1)]),_:2},1032,["color"])):(r(),y(h,{key:1,class:"button-priceChange",color:t.$store.getters.downColor[3],size:"mini"},{default:b(()=>[M(l(t.$f.formatNumber2(i.price_change||0,1)||0)+"% ",1)]),_:2},1032,["color"]))])],8,P))),128)),z(f(g,{class:"empty",image:t.emptyNoDataLight,description:t.$t("empty")},null,8,["image","description"]),[[H,a.tableList&&a.tableList.length===0&&!s.isLoading||!a.tableList]])])]),_:1},8,["loading","finished","error","error-text","loading-text","finished-text"])])}var et=L(V,[["render",tt],["__scopeId","data-v-fa1f579e"]]);const it={name:"TokenList",props:{tableList:Array,loading:{type:Boolean,default:!1},finished:{type:Boolean,default:!1},error:{type:Boolean,default:!1}},emits:["getBrc20MintList"],data(){return{activeSort:0,sortBy:""}},computed:{isLoading(){return this.loading},errors(){return this.error}},methods:{tableRowClick(t){this.$f.openMarket(t.token,t.symbol,t.chain)}}},nt={class:"table"},st={class:"table-list"},ot={class:"table-item table-header"},at={class:"table-item_d"},lt={class:"table-item_d"},rt={class:"table-item_d"},ct={class:"table-item_d"},dt=["onClick"],ht={class:"token-info table-item_d"},_t={class:"token-symbol ml-4"},mt={class:"table-item_d"},ut={class:"table-item_d"},gt={class:"flex-end"},vt={class:"table-item_d"};function ft(t,e,a,u,o,s){const c=d("van-image"),h=d("van-progress"),g=d("van-empty"),p=d("van-list");return r(),m("div",nt,[f(p,{loading:s.isLoading,"onUpdate:loading":e[0]||(e[0]=i=>s.isLoading=i),finished:a.finished,error:s.errors,"onUpdate:error":e[1]||(e[1]=i=>s.errors=i),"error-text":t.$t("errorText"),onLoad:e[2]||(e[2]=i=>t.$emit("getBrc20MintList")),"loading-text":t.$t("loading"),"finished-text":t.$t("noMore"),"immediate-check":!1},{default:b(()=>[n("ul",st,[n("li",ot,[n("span",at,l(t.$t("token")),1),n("span",lt,l(t.$t("1HMintedNums")),1),n("span",rt,l(t.$t("minted")),1),n("span",ct,l(t.$t("holders")),1)]),(r(!0),m(C,null,S(a.tableList,(i,B)=>(r(),m("li",{class:"table-item",key:B,onClick:_(N=>s.tableRowClick(i),["stop"])},[n("div",ht,[f(c,{round:"",width:"30px",height:"30px","icon-size":"30px","lazy-load":"","show-loading":"",src:t.$f.formatIcon(i),"error-icon":"/icon-default.png"},null,8,["src"]),n("span",_t,l(i.symbol||""),1)]),n("div",mt,l(t.$f.formatNumber2((i==null?void 0:i.mint_times_24h)||0)),1),n("div",ut,[n("div",gt,[n("span",null,l(t.$f.formatNumber2((i==null?void 0:i.percent)||0))+"%",1),f(h,{percentage:i==null?void 0:i.percent,"show-pivot":!1,style:{width:"60px","margin-top":"3px"}},null,8,["percentage"])])]),n("div",vt,l(t.$f.formatNumber2((i==null?void 0:i.holders)||0,3,4,10**4)),1)],8,dt))),128)),z(f(g,{class:"empty",image:t.emptyNoDataLight,description:t.$t("empty")},null,8,["image","description"]),[[H,a.tableList&&a.tableList.length===0&&!s.isLoading||!a.tableList]])])]),_:1},8,["loading","finished","error","error-text","loading-text","finished-text"])])}var pt=L(it,[["render",ft],["__scopeId","data-v-9b364214"]]);const bt={name:"Brc",data(){return{active:"hot",conditions:{page:1,page_size:20,sort:"",sort_dir:""},tableData:[],loadingHot:!1,finishedHot:!1,errorHot:!1,total:0,bannerList:[],statistics:{},mint:{page:1,page_size:20},total2:0,tableDataMint:[],loadingMint:!1,finishedMint:!1,errorMint:!1}},computed:{tabs(){return[{id:"hot",title:this.$t("hots")},{id:"mint",title:this.$t("mint")}]}},components:{list:et,mint:pt},mounted(){this.init()},methods:{init(){console.log("333333333333"),this.conditions.page=1,this.getBrc20()},switchTabs(t){this.active=t.id,this.active=="hot"&&(this.conditions={page:1,page_size:2,sort:"",sort_dir:""},this.getBrc20()),this.active=="mint"&&(this.mint={page:1,page_size:20},this.getBrc20MintList())},getBrc20Banners(){I().then(t=>{this.bannerList=t==null?void 0:t.filter(e=>e.picture_link!=="")}).catch(t=>{console.log(t)})},getBrc20Info(){R().then(t=>{this.statistics=t}).catch(t=>{console.log(t)})},sortChange({sort:t,sort_dir:e}){this.tableData=[],this.conditions.sort=t,this.conditions.sort_dir=e,e||(this.conditions.sort=""),this.conditions.page=1,this.getBrc20()},onload(){console.log(1111111),this.getBrc20()},getBrc20(){this.loadingHot=!0;let t={page:this.conditions.page,page_size:this.conditions.page_size,sort:this.conditions.sort,sort_dir:this.conditions.sort_dir};T(t).then(e=>{var u,o,s;this.total=e==null?void 0:e.total;let a=(u=e==null?void 0:e.data)==null?void 0:u.map(c=>{var h;return{...c,token:(h=c.token)==null?void 0:h.trim()}});this.tableData=(o=this.tableData)==null?void 0:o.concat(a),this.finishedHot=((s=e==null?void 0:e.data)==null?void 0:s.length)<this.conditions.page_size,this.conditions.page++}).catch(e=>{this.errorHot=!0,this.finishedHot=!0,console.log(e)}).finally(()=>{this.loadingHot=!1})},getBrc20MintList(){this.loadingMint=!0,U(this.mint).then(t=>{var a,u,o;this.total2=t==null?void 0:t.total;let e=(a=t==null?void 0:t.data)==null?void 0:a.map(s=>{var c;return{...s,percent:((s==null?void 0:s.confirmed_minted)/(s==null?void 0:s.max)*100).toFixed(1)||0,token:(c=s.token)==null?void 0:c.trim(),mint_times_24h:Math.ceil((s==null?void 0:s.mint_times_24h)||0)}});this.tableDataMint=(u=this.tableDataMint)==null?void 0:u.concat(e),this.finishedMint=((o=t==null?void 0:t.data)==null?void 0:o.length)<this.mint.page_size,this.mint.page++}).catch(t=>{this.errorMint=!0,this.finishedMint=!0,console.log(t)}).finally(()=>{this.loadingMint=!1})}}},yt={class:"brc20"},kt={class:"tabs-container"},Bt={class:"tabs-wrap"},Lt={class:"tabs"},Ct=["onClick"];function St(t,e,a,u,o,s){const c=d("list"),h=d("mint");return r(),m("div",yt,[n("div",kt,[n("div",Bt,[n("div",Lt,[(r(!0),m(C,null,S(s.tabs,(g,p)=>(r(),m("button",{class:v(["tabs-item clickable",{active:o.active==g.id}]),key:p,onClick:_(i=>s.switchTabs(g),["stop"])},[n("span",null,l(g.title),1)],10,Ct))),128))])])]),o.active==="hot"?(r(),y(c,{key:0,tableList:o.tableData,loading:o.loadingHot,finished:o.finishedHot,error:o.errorHot,onOnload:s.onload,onSortChange:s.sortChange},null,8,["tableList","loading","finished","error","onOnload","onSortChange"])):$("",!0),o.active==="mint"?(r(),y(h,{key:1,tableList:o.tableDataMint,loading:o.loadingMint,finished:o.finishedMint,error:o.errorMint,onGetBrc20MintList:s.getBrc20MintList},null,8,["tableList","loading","finished","error","onGetBrc20MintList"])):$("",!0)])}var $t=L(bt,[["render",St],["__scopeId","data-v-b585384a"]]);export{$t as default};
